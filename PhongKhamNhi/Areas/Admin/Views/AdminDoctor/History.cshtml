@using PagedList.Mvc

@model PagedList.IPagedList<PhongKhamNhi.Models.DTO.LichSuKhamDTO>

@{ ViewBag.Title = "Lịch sử khám bệnh";
                Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml"; }

<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>Lịch sử khám bệnh</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item active">Lịch sử khám bệnh</li>
                </ol>
            </div>
        </div>
    </div>
</section>

<section class="content">
    <div class="container-fluid card card-outline card-info">
        <h4 style="padding: 10px 0;">Bác sĩ: @ViewBag.ten</h4>
        <div class="form-search">
            @using (Html.BeginForm("History", "AdminDoctor", FormMethod.Get, new { }))
            {
<input type="hidden" value="@ViewBag.id" />
                <div class="row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-3">
                                <div class="">
                                    <b>Từ ngày</b>
                                    <input type="date" class="form-control" name="tu" value="@ViewBag.tu">
                                </div>
                            </div>
                            <div class="col-3">
                                <div class="">
                                    <b>Đến ngày</b>
                                    <input type="date" class="form-control" name="den" value="@ViewBag.den">
                                </div>
                            </div>
                            <div class="col-3">
                                <div class="">
                                    <b>Dịch vụ</b>
                                    <select id="dichVu" class="form-control" name="dv">
                                        <option value="0">- Tất cả dịch vụ -</option>
                                        @foreach (var item in ViewBag.ListDichVu)
                                        {
                                            if (@item.MaDV == ViewBag.dv)
                                            {
                        <option selected value="@item.MaDV">@item.TenDV</option>
 }
                                            else
                                            {
                        <option value="@item.MaDV">@item.TenDV</option>}
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="col-3">
                                <div class="btn-search" style="margin-top: 24px;">
                                    <button type="submit" class="btn btn-default btn-pro" title="Tìm kiếm" style="background-color: #2ea1f8; flex: auto; ">
                                        <i class="fa fa-search"></i> Tìm kiếm
                                    </button>
                                    <a href="~/Admin/AdminDoctor/History/@ViewBag.id" class="btn btn-default btn-pro" title="Tải lại" style="background-color: #34a544">
                                        <i class="fas fa-sync-alt"></i> Tải lại
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>            }
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th class="text-center">Mã phiếu khám</th>
                    <th class="text-center">Thời gian</th>
                    <th class="text-center">Bệnh nhi</th>
                    <th class="text-center">Dịch vụ</th>
                    <th class="text-center">Kết luận</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
    <tr>
        <td class="text-center">
            @Html.DisplayFor(modelItem => item.MaPhieuKB)
        </td>
        <td class="text-center">
            @Html.DisplayFor(modelItem => item.ThoiGianLap)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HoTen)<br />
            <i class="fas fa-birthday-cake"></i> @item.NgaySinh.Value.ToString("dd/MM/yyyy")
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TenDV)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.KetLuan)
        </td>
    </tr>}
            </tbody>
        </table>
        <div class="row">
            <div class="col-md-12">
                @Html.PagedListPager(Model, PageNum => Url.Action("Index", new { PageNum, @tu = @ViewBag.tu, @den = @ViewBag.den, @dv = @ViewBag.dv }))
            </div>
        </div>
    </div>
</section>