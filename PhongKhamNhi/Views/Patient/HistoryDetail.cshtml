@model PhongKhamNhi.Models.Entities.PhieuKhamBenh

@{
    ViewBag.Title = "Chi tiết phiếu khám bệnh";
}

<div class="user-profile__wrap sec">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-3 col-xs-12">
                <div class="sidebar-profile">
                    <div class="profiles">
                        <h3 class="headline" style="font-size: 18px;">Tài khoản của</h3>
                        <h3 class="username" style="font-size: 21px;">@ViewBag.HoTen</h3>
                    </div>
                    <div class="user-profile__menu">
                        <ul class="user-profile__menu__wrap">
                            <li class="user-profile__item">
                                <a href="/Patient" class="user-profile__link">
                                    <span class="-ap icon-user6 icon mai-information-circle-outline"></span> <span class="txt">Thông tin tài khoản</span>
                                </a>
                            </li>
                            <li class="user-profile__item">
                                <a href="/Patient/AppointmentHistory" class="user-profile__link">
                                    <span class="-ap icon-file-text icon mai-time"></span> <span class="txt">Lịch sử hẹn khám</span>
                                </a>
                            </li>
                            <li class="user-profile__item active">
                                <a href="/Patient/History" class="user-profile__link">
                                    <span class="-ap icon-file-text icon mai-fitness"></span> <span class="txt">Lịch sử khám bệnh</span>
                                </a>
                            </li>
                            <li class="user-profile__item">
                                <a href="/Patient/Invoice" class="user-profile__link">
                                    <span class="-ap icon-file-text icon mai-newspaper"></span> <span class="txt">Hóa đơn mua thuốc</span>
                                </a>
                            </li>
                            <li class="user-profile__item">
                                <a href="/Patient/EditPassword" class="user-profile__link">
                                    <i class="icon fa fa-key mai-key" aria-hidden="true"></i><span class="txt">Đổi mật khẩu</span>
                                </a>
                            </li>
                            <li class="user-profile__item">
                                <a href="/Patient/Logout" class="user-profile__link" onclick="return confirm('Bạn chắc chắn muốn đăng xuất?')">
                                    <i class="icon fa fa-sign-out mai-log-out" aria-hidden="true"></i><span class="txt">Đăng xuất</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-9 col-sm-9 col-xs-12">
                <div class="wrap__profile__info">
                    <h3 class="title-profile">Mã phiếu khám bệnh: @Model.MaPhieuKB - ngày @Model.ThoiGianLap</h3>
                    <div class="profile-content">
                        <div class="form-group row">
                            <b class="col-md-2">Mã bệnh nhi:</b>
                            <div class="col-md-1">
                                @Model.MaBN
                            </div>
                            <b class="col-md-3">Dịch vụ khám:</b>
                            <div class="col-md-2">
                                @Model.DichVuKham.TenDV
                            </div>
                            <b class="col-md-2 text-right">Tổng tiền:</b>
                            <div class="col-md-2 text-right">
                                @Model.DichVuKham.DonGia.ToString("N0") VNĐ
                            </div>
                        </div>
                        <div class="form-group row">
                            <b class="col-md-2">Họ tên:</b>
                            <div class="col-md-3">
                                @Model.BenhNhi.HoTen
                            </div>
                            <b class="col-md-2 text-right">Ngày sinh:</b>
                            <div class="col-md-2">
                                @Model.BenhNhi.NgaySinh.ToString().Split(' ')[0]
                            </div>
                            <b class="col-md-2 text-right">Giới tính:</b>
                            <div class="col-md-1">
                                @Model.BenhNhi.GioiTinh
                            </div>
                        </div>
                        <hr />
                        <div class="form-group row">
                            <b class="col-md-2">Bác sĩ:</b>
                            <div class="col-md-6">
                                @Model.BacSi.HoTen
                            </div>
                            <b class="col-md-2 text-right">Học vị:</b>
                            <div class="col-md-2">
                                @Model.BacSi.HocVi
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <b>Biểu hiện:</b>
                                @Html.TextAreaFor(model => model.BieuHien, new { @class = "form-control", @rows = "3", @readonly = "readonly" })
                            </div>
                            <div class="col-md-6">
                                <b>Kết luận:</b>
                                @Html.TextAreaFor(model => model.KetLuan, new { @class = "form-control", @rows = "3", @readonly = "readonly" })
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div id="xn-cha" class="card card-outline card-info">
                                    @if (ViewBag.PhieuDkXn != null)
                                    {
                        <div class="form-group">
                            <h5 style="margin: 10px 0 0 10px; font-weight: bold;">Kết quả xét nghiệm</h5>
                        </div>
                                        <table class="table table-xn">
                                            <thead>
                                                <tr>
                                                    <th class="text-center">Tên xét nghiệm</th>
                                                    <th class="text-center">Trị số bình thường</th>
                                                    <th class="text-center">Đơn vị tính</th>
                                                    <th class="text-center">Kết quả</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewBag.PhieuDkXn)
                                                {
                                                    foreach (var kq in item)
                                                    {
                                                        <tr>
                                                            <td>@kq.TenXN</td>
                                                            <td class="text-center">@kq.TriSoBinhThuong</td>
                                                            <td class="text-center">@kq.DonViTinh</td>
                                                            <td class="text-center">@kq.KetQua</td>
                                                        </tr>
                                                    }

                                                }
                                            </tbody>
                                        </table>}
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-12">
                                <div id="don-thuoc-cha" class="card card-outline card-info">
                                    @if (ViewBag.DonThuoc != null)
                                    {
                                        <div class="form-group">
                                            <h5 style="margin: 10px 0 0 10px; font-weight: bold;">Thuốc chỉ định</h5>
                                        </div>
                                        <table class="table table-xn">
                                            <thead>
                                                <tr>
                                                    <th class="text-center">Tên thuốc</th>
                                                    <th class="text-center">Số lượng</th>
                                                    <th class="text-center">Đơn vị tính</th>
                                                    <th class="text-center">Cách dùng</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in ViewBag.DonThuoc)
                                                {
                                                    <tr>
                                                        <td>@item.TenThuoc</td>
                                                        <td class="text-center">@item.SoLuong</td>
                                                        <td class="text-center">@item.DonViTinh</td>
                                                        <td>@item.CachDung</td>
                                                    </tr>
}
                                            </tbody>
                                        </table>
                                    }
                                </div>
                                @if (ViewBag.DonThuoc.Count > 0 @*&& Model.Type*@)
                                {
                                    <a href="/Patient/BuyMedicine/@Model.MaPhieuKB" class="btn btn-primary btn-mua-thuoc">Mua thuốc</a>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
